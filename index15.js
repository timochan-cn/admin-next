import{d as m,r as s,bR as b,w as g,h as a,Q as c,b6 as f,b0 as v,a$ as d,z as y}from"./vendor.js";import{u as S,a as h,T as w}from"./use-async-monaco.js";import{a as j,R as N}from"./index.js";import{E as T}from"./types.js";const M=t=>{switch(t){case"objectId":return((o=Math,l=Date,n=16,r=u=>o.floor(u).toString(n))=>r(l.now()/1e3)+" ".repeat(n).replace(/./g,()=>r(o.random()*n)))();case"now":return new Date().toISOString();case"randomtext":return btoa(Math.random().toString()).substring(10,5);case"randomnumber":return Math.floor(Math.random()*1e4);default:return"{{"+t+"}}"}};var L=m({setup(){const t=s(""),o=s(JSON.parse(localStorage.getItem("debug-event")||"{}")),l=s("web");b("debug-event",o);const n=S({value:o[t.value]}),r=s();g(()=>t.value,e=>{u.editor.setValue(o.value[e]||"")});const u=h(r,n,e=>{o.value={...o.value,[t.value]:e}},{language:"json"}),p=async()=>{const e=o.value[t.value].replace(/(\{\{(.*?)\}\})/g,(x,D,i)=>M(i));console.log(e),N.api.debug.events.post({params:{type:l.value,event:t.value},data:JSON.parse(e)})};return()=>a(j,null,a(w,null,a(c,{span:"12"},a(f,null,a(v,{label:"Type"},a(d,{tag:!0,filterable:!0,value:l.value,onUpdateValue:e=>void(l.value=e),options:["web","all","admin"].map(e=>({value:e,label:e}))})),a(v,{label:"Event"},a(d,{tag:!0,filterable:!0,value:t.value,onUpdateValue:e=>void(t.value=e),options:Object.keys(T).map(e=>({value:e,label:e}))}))),a("div",null,a(y,{type:"primary",onClick:p},"\u6D4B\u8BD5"))),a(c,{span:"24"},a("div",{class:"h-[calc(100vh-20rem)] relative"},a("div",{ref:r,class:"h-full"})))))}});export{L as default};
