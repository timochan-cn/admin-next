import{p as le,c as Oe,i as N,a as W,d as _,h as t,R as re,S as Me,N as Ve,r as g,u as He,b as qe,o as P,e as ze,f as C,w as ie,g as j,j as K,k as J,l as F,n as R,m as ce,q as Ne,I as c,H as We,s as de,t as L,v as pe,x as Re,y as me,z as D,A as O,B as Y,C as Ue,M as Ge,F as $,D as he,E as Ke,G as ve,J as Je,_ as Ye,K as ge,L as Q,O as M,P as fe,Q as X,T as ye,U,V as Z,W as Qe,X as Xe,Y as Ze,Z as et,$ as tt,a0 as nt,a1 as at,a2 as _e,a3 as ut,a4 as ot,a5 as st,a6 as lt,a7 as rt,a8 as Ee,a9 as it,aa as ct,ab as dt,ac as pt,ad as mt,ae as ht,af as vt,ag as we,ah as Be,ai as be,aj as gt,ak as ft,al as yt,am as _t,an as V,ao as H,ap as Et,aq as wt,ar as Bt,as as bt,at as Ct,au as At,av as Pt,aw as kt,ax as xt,ay as Ft,az as Dt,aA as It,aB as St,aC as jt,aD as Lt,aE as $t,aF as Tt,aG as Ot,aH as Mt,aI as Vt,aJ as Ht,aK as qt,aL as zt,aM as Nt,aN as Wt,aO as Rt,aP as Ut,aQ as Gt,aR as Kt,aS as Jt,aT as Yt}from"./vendor.js";const Qt=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const s of u)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function a(u){const s={};return u.integrity&&(s.integrity=u.integrity),u.referrerpolicy&&(s.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?s.credentials="include":u.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(u){if(u.ep)return;u.ep=!0;const s=a(u);fetch(u.href,s)}};Qt();const Xt="modulepreload",Ce={},Zt="https://cdn.jsdelivr.net/gh/mx-space/admin-next@gh-pages/",f=function(n,a){return!a||a.length===0?n():Promise.all(a.map(o=>{if(o=`${Zt}${o}`,o in Ce)return;Ce[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${s}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":Xt,u||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),u)return new Promise((i,p)=>{l.addEventListener("load",i),l.addEventListener("error",p)})})).then(()=>n())};var r;(function(e){e.Dashboard="dashboard",e.Post="post",e.ViewPost="view-posts",e.EditPost="edit-posts",e.EditCategory="edit-category",e.Note="note",e.ViewNote="view-notes",e.EditNote="edit-notes",e.Comment="comment",e.Page="page",e.ListPage="page-list",e.EditPage="page-edit",e.Say="say",e.ListSay="say-list",e.EditSay="say-edit",e.Project="project",e.ListProject="project-list",e.EditProject="project-edit",e.Friend="friends",e.File="files",e.Analyze="analyze",e.Setting="setting",e.Profile="setting-profile",e.System="setting-system",e.Security="setting-security",e.Reset="reset",e.Other="other",e.Backup="backup",e.Markdown="markdown",e.Cron="cron",e.Log="log",e.Optimize="optimize",e.Login="login",e.Home="home",e.Setup="setup",e.ListShortHand="shorthand",e.Snippet="snippet",e.AssetTemplate="asset-template"})(r||(r={}));function Ae(e){!e.token&&(e.token=Symbol("functional store"));const n=e();return le(e.token,n),n}function en(...e){const n={};return e.forEach(a=>{const o=Ae(a);n[Oe(a.name)]=o}),n}function A(e,n){const a=e.token,o=e.root;switch(n){case"optional":return N(a)||e.root||null;case"root":return e.root||(e.root=e()),e.root;default:if(N(a))return N(a);if(o)return e.root;throw new Error(`\u72B6\u6001\u94A9\u5B50\u51FD\u6570${e.name}\u672A\u5728\u4E0A\u5C42\u7EC4\u4EF6\u901A\u8FC7\u8C03\u7528useProvider\u63D0\u4F9B`)}}const G="mx-admin-token";function Pe(){return W.get(G)?JSON.parse(W.get(G)):null}function tn(e,n){if(!!e)return W.set(G,JSON.stringify(e),{expires:n})}function aa(){return W.remove(G)}const nn=(e,n)=>{let a=/^\//.test(e)?e:"/"+e;if(!a.match(/(\/?:)/))return a;if(!n||Object.prototype.toString.call(n)!=="[object Object]")throw new TypeError("params must be object");for(const u in n)a=a.replaceAll(":"+u,n[u]);return a},ee=(e,n,a)=>{const o=nn(e.path,e.meta?.params),u=a+"/"+o;return{title:e.meta?.title||e.name?.toString()||o,path:o,icon:e.meta?.icon,subItems:an(e,u),hasParent:n,fullPath:u.replaceAll("//","/"),query:e.meta?.query}};function an(e,n=""){return Array.isArray(e.children)?e.children.filter(a=>a.meta?a.meta.hide!==!0:!0).map(a=>ee(a,!0,n)):[]}const un=e=>e.find(n=>n.name==="home"&&n.path==="/").children.filter(n=>n.path!=="*"&&n.meta?.hide!==!0).map(n=>ee(n,!1,"")),k=_({setup(){return()=>t(re,null,{default({Component:e}){return t(Me,null,{default:()=>e,fallback(){return t("div",{class:"fixed left-1/2 top-1/2 transform text-primary-default -translate-y-1/2 -translate-x-1/2"},t(Ve,{strokeWidth:14,show:!0,rotate:!0}))}})}})}}),ke=window.injectData.WEB_URL||"https://innei.ren",xe=window.injectData.LOGIN_BG||"https://gitee.com/xun7788/my-imagination/raw/master/images/88426823_p0.jpg";function q(){const e=g({}),n=g(250),a=g(!!e.value.mobile),o=He(),u=qe(o);P(()=>{const p=ze(s,500,{trailing:!0});window.onresize=p,s()});const s=()=>{const p=window.innerHeight,y=document.documentElement.getBoundingClientRect().width,{hpad:m,pad:b,mobile:h}=e.value;e.value.h&&Math.abs(p-e.value.h)<80&&y===e.value.w&&(m||b||h)||(e.value={w:y,h:p,mobile:window.screen.width<=568||window.innerWidth<=568,pad:window.innerWidth<=768&&window.innerWidth>568,hpad:window.innerWidth<=1024&&window.innerWidth>768,wider:window.innerWidth>1024&&window.innerWidth<1920,widest:window.innerWidth>=1920,phone:window.innerWidth<=768})},l=C(()=>e.value.w-n.value+(a.value?e.value.mobile?50:100:0)),i=C(()=>l.value-parseInt(getComputedStyle(document.documentElement).fontSize)*6);return ie(()=>o.value,p=>{p?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{viewport:e,contentWidth:l,sidebarWidth:n,contentInsetWidth:i,sidebarCollapse:a,isDark:o,toggleDark:u}}const Fe={title:window.injectData.TITLE||"\u9759\u304B\u306A\u68EE"};function z(){const e=g(null),n=g(""),a=Pe();a&&(n.value=a);const o=j();return{user:e,token:n,async fetchUser(){try{const u=await B.api.master.get();e.value=u}catch(u){u.data?.message=="\u6CA1\u6709\u5B8C\u6210\u521D\u59CB\u5316!"&&o.replace("/setup")}},updateToken(u){u&&tn(u,7),n.value=u}}}var te=(e,n)=>{const a=e.__vccOpts||e;for(const[o,u]of n)a[o]=u;return a};const on=_({props:{size:{type:Number,default:50},src:{type:String,required:!0}},setup(e){const n=g(!1),a=()=>{if(!e.src)return;const o=new Image;o.src=e.src,o.onload=u=>{n.value=!0}};return P(()=>{a()}),ie(()=>e.src,()=>{a()}),{loaded:n}}}),sn=["src"],ln=F("div",{class:"sr-only"},"\u4E00\u4E2A\u5934\u50CF",-1);function rn(e,n,a,o,u,s){return K(),J("div",{class:"avatar",style:R({height:`${e.size}px`,width:`${e.size}px`})},[F("img",{src:e.src,alt:"",style:R({display:e.loaded?"":"none"})},null,12,sn),ln],4)}var ne=te(on,[["render",rn]]);const cn="_root_1ytef_1",dn="_collapse_1ytef_5",pn="_sidebar_1ytef_31",mn="_items_1ytef_38",hn="_active_1ytef_50",vn="_expand_1ytef_51",gn="_item_1ytef_8",fn="_menu_1ytef_83";var w={root:cn,collapse:dn,"item-title":"_item-title_1ytef_8","has-child":"_has-child_1ytef_12","collapse-button":"_collapse-button_1ytef_23",sidebar:pn,items:mn,active:hn,expand:vn,item:gn,menu:fn};const yn=_({name:"SidebarComp",props:{collapse:{type:Boolean,required:!0},width:{type:Number,required:!0},onCollapseChange:{type:Function,required:!0}},setup(e){const n=j(),{user:a}=A(z),o=C(()=>n.currentRoute.value),u=g([]),s=A(oe);P(()=>{u.value=un(n.getRoutes())}),ce(()=>{if(s.app.value?.version==="dev"){const E=n.getRoutes().find(v=>v.path==="/debug");u.value.unshift(ee(E,!1,""))}});const l=g(0);function i(h){if(h===l.value){l.value=-1;return}l.value=h}function p(h,E){h.subItems?.length||(n.push({path:h.fullPath,query:h.query}),E&&i(E))}const y=Fe.title,m=g(),b=A(q);return Ne(m,h=>{const E=b.viewport;(E.value.pad||E.value.mobile)&&e.onCollapseChange(!0)}),()=>t("div",{class:L(w.root,e.collapse?w.collapse:null),style:{width:!e.collapse&&e.width?e.width+"px":""},ref:m},t("div",{class:"fixed left-0 top-0 h-screen overflow-hidden z-10 text-white "+w.sidebar},t("div",{class:"title relative font-medium text-center text-2xl"},t("h1",{class:"py-6",style:{display:e.collapse?"none":""}},y),t("button",{class:w["collapse-button"],onClick:()=>{e.onCollapseChange(!e.collapse)}},t(c,null,t(We,null)))),t(de,{class:w.menu,nativeScrollbar:!1},t("div",{class:w.items},u.value.map((h,E)=>t("div",{class:L("py-2",o.value.fullPath===h.fullPath||o.value.fullPath.startsWith(h.fullPath)?w.active:"",w.item),"data-path":h.fullPath},t("button",{key:h.title,class:"py-2 flex w-full items-center",onClick:h.subItems?.length?()=>i(E):()=>p(h,E)},t("span",{style:{flexBasis:"3rem"},class:"flex justify-center"},h.icon),t("span",{class:w["item-title"]},h.title)),h.subItems&&t("ul",{class:L("overflow-hidden  "+(h.subItems.length?w["has-child"]:""),l.value===E?w.expand:""),style:{maxHeight:l.value===E?h.subItems.length*3.5+"rem":"0"}},h.subItems.map(v=>t("li",{key:v.path,class:L(o.value.fullPath===v.fullPath||o.value.fullPath.startsWith(v.fullPath)?w.active:"",w.item)},t("button",{onClick:()=>p(v),class:"flex w-full items-center py-4"},t("span",{class:"flex justify-center items-center",style:{flexBasis:"3rem"}},v.icon),t("span",{class:w["item-title"]},v.title))))))))),t("button",{class:L("bottom-bar flex space-x-2 items-center  transform translate-y-1/3 phone:hidden",e.collapse?"px-8":"px-12"),onClick:()=>{window.open(ke)}},t(ne,{src:a.value?.avatar,size:40}),e.collapse?null:t("span",{class:"pl-12"},a.value?.name)),t("button",{class:"hidden phone:flex w-full items-center justify-center absolute bottom-0 pb-4",onClick:()=>{window.open(ke)}},t(ne,{src:a.value?.avatar,size:40}))))}}),_n="_root_5exgh_1",En="_content_5exgh_2";var De={root:_n,content:En};const Ie=_({name:"SidebarLayout",setup(e){const n=A(q),a=n.sidebarCollapse,o=C(()=>n.viewport.value.mobile||n.viewport.value.pad);ce(()=>{a.value=!!o.value});const u=n.sidebarWidth;return()=>t("div",{class:De.root},t(yn,{collapse:a.value,width:u.value,onCollapseChange:s=>{a.value=s}}),t(de,{embedded:!0,nativeScrollbar:!1,class:De.content,style:{left:a.value?"100px":u.value+"px",pointerEvents:o.value&&!a.value?"none":"auto"}},t(k,null)))}}),ae=new Map,wn=_({props:{ip:{type:String,required:!0},triggerEl:{type:[Object,Function],required:!0},trigger:{type:String,default:"click"}},setup(e){const n=g("\u83B7\u53D6\u4E2D.."),a=s=>{n.value=`IP: ${s.ip}<br />
      \u57CE\u5E02: ${[s.countryName,s.regionName,s.cityName].filter(Boolean).join(" - ")||"N/A"}<br />
      ISP: ${s.ispDomain||"N/A"}<br />
      \u7EC4\u7EC7: ${s.ownerDomain||"N/A"}<br />
      \u8303\u56F4: ${s.range?Object.values(s.range).join(" - "):"N/A"}
      `},o=()=>n.value="\u83B7\u53D6\u4E2D..",u=async(s,l)=>{if(!!l)if(s){if(ae.has(l)){const p=ae.get(l);a(p);return}const i=await B.api.tools.ip(l).get();a(i),ae.set(l,i)}else o()};return()=>t(pe,{trigger:e.trigger,placement:"top",onUpdateShow:async s=>{!e.ip||await u(s,e.ip)}},{trigger(){return typeof e.triggerEl=="function"?e.triggerEl():e.triggerEl},default(){return t("div",{innerHTML:n.value})}})}}),Bn=()=>{const e=me(),n=g("");return{create(){return new Promise((a,o)=>{const u=e.create({title:"\u901F\u8BB0",type:"success",content(){return t(Re,{resizable:!1,type:"textarea",onUpdateValue:s=>{n.value=s},value:n.value,class:"h-[300px] max-h-[80vh]"})},action(){return t(O,null,t(D,{round:!0,type:"primary",onClick:()=>{B.api.recently.post({data:{content:n.value}}).then(s=>{n.value="",message.success("\u8BB0\u5F55\u6210\u529F"),u.destroy(),a(s)}).catch(s=>{o(s)})}},"\u8BB0\u597D\u4E86"),t(D,{round:!0,onClick:()=>{u.destroy(),a(null)}},"\u4E0D\u60F3\u8BB0\u4E86"))}})})}}};var I;(function(e){e.\u52A8\u753B="a",e.\u6F2B\u753B="b",e.\u6E38\u620F="c",e.\u6587\u5B66="d",e.\u539F\u521B="e",e.\u6765\u81EA\u7F51\u7EDC="f",e.\u5176\u4ED6="g",e.\u5F71\u89C6="h",e.\u8BD7\u8BCD="i",e.\u7F51\u6613\u4E91="j",e.\u54F2\u5B66="k",e.\u6296\u673A\u7075="l"})(I||(I={}));const bn=async(e=I.\u6587\u5B66)=>await(await fetch("https://v1.hitokoto.cn/"+(Array.isArray(e)?"?"+e.map(o=>"c="+o).join("&"):"?c="+e))).json(),Cn=async()=>(await(await fetch("https://v2.jinrishici.com/one.json")).json()).data,An="_header_18z7e_1",Pn="_title_18z7e_23",kn="_main_18z7e_30",xn="_buttons_18z7e_42",Fn="_show_18z7e_1";var T={header:An,"header-blur":"_header-blur_18z7e_9",title:Pn,main:kn,buttons:xn,show:Fn,"header-actions":"_header-actions_18z7e_80"};const Se=Symbol("inject"),ua=()=>N(Se,{addFloatButton(e){return Symbol()},removeFloatButton(e){},setHeaderButton(e){}}),Dn=_({props:{actionsElement:{type:Object,required:!1},footerButtonElement:{type:Object,required:!1},title:{type:String}},setup(e,n){const{slots:a}=n,o=j(),u=C(()=>o.currentRoute),s=()=>e.actionsElement??null,l=()=>e.footerButtonElement??null,i=g(null);le(Se,{addFloatButton(v){i.value??=[];const d=typeof v=="function"?v:()=>v;return d.displayName$=d.name?Symbol(d.name):Symbol("fab"),i.value.push(d),d.displayName$},removeFloatButton(v){if(!i.value)return;const d=i.value.findIndex(x=>x.displayName$===v);d&&d!==-1&&i.value.splice(d,1)},setHeaderButton(v){if(!v){b.value=null;return}b.value=()=>v}}),Y(()=>{i.value=null});const p=C(()=>e.title??u.value.value.matched.reduce((v,d)=>v+(d.meta.title?v.length>0?" \xB7 "+d.meta.title:d.meta.title:""),"")),{isDark:y,toggleDark:m}=A(q),b=g(),h=_({setup(){return()=>t("div",{class:L(T["header-actions"],"space-x-4")},b.value?t(b.value,null):e.actionsElement?t(s,null):a.actions?.())}}),E=_({setup(){return()=>t("footer",{class:T.buttons},i.value?i.value.map(v=>t(v,{key:v.displayName})):null,e.footerButtonElement?t(l,null):a.buttons?.(),t("button",{onClick:()=>void m()},t(c,null,y.value?t(Ue,null):t(Ge,null))))}});return()=>t($,null,t("header",{class:T.header},t("div",{class:T["header-blur"]}),t("h1",{class:T.title},p.value),t(h,null)),t("main",{class:T.main},a.default?.()),t(E,null))}}),In=_({props:{label:String,value:[String,Number]},setup(e){return()=>t($,null,e.value==="N/A"?t(O,{vertical:!0,align:"center",class:"min-h-[4rem]"},t(he,{style:{height:".8rem",width:"5rem"}}),t(he,{style:{height:"1.8rem",width:"3rem"}})):t(Ke,{label:e.label,value:e.value}))}}),Sn=_({props:{label:String,value:[Number,String],icon:Function,actions:{type:Array,default:()=>[]}},setup(e){return()=>t($,null,t(ve,null,t(Je,null,{header(){return t(In,{label:e.label,value:e.value})},["header-extra"](){return t(c,{class:"text-4xl opacity-70"},typeof e.icon=="function"?e.icon():e.icon)},action(){return e.actions?t(O,{size:"medium",align:"center"},e.actions.map(n=>{const a=()=>n.primary?t(D,{round:!0,type:"primary",onClick:n.onClick},n.name):t(D,{text:!0,onClick:n.onClick},n.name);return n.showBadage?t(Ye,{value:e.value,processing:!0},t(a,null)):t(a,null)})):null}})))}}),jn=_({name:"Dashboard",setup(){const e=g(new Proxy({},{get(){return"N/A"}})),n=g(null),a=async()=>{const d=await B.api.aggregate.stat.get();e.value=d,n.value=new Date},o=()=>{bn([I.\u52A8\u753B,I.\u539F\u521B,I.\u54F2\u5B66,I.\u6587\u5B66]).then(d=>{const x=Object.values(et(d,["from","from_who","creator"])).filter(Boolean)[0];d.hitokoto?i.value=d.hitokoto+(x?" \u2014\u2014 "+x:""):i.value="\u6CA1\u6709\u83B7\u53D6\u5230\u53E5\u5B50\u4FE1\u606F"})};let u;P(()=>{u=setTimeout(function d(){a().then(()=>{u=setTimeout(d,3e3)})},3e3)}),Y(()=>{u=clearTimeout(u)});const s=g(""),l=g(null);ge(()=>{o(),a(),Cn().then(d=>{s.value=d.content,l.value=d})});const i=g(""),p=Q(),y=A(z),m=j(),b=_(()=>()=>t($,null,t(M,{class:"text-opacity-80 font-light"},"\u767B\u9646\u8BB0\u5F55"),t("p",{class:"-mt-2 mb-3 relative text-gray-500"},t("span",null,"\u4E0A\u6B21\u767B\u9646 IP:"," ",y.user.value?.lastLoginIp?t(wn,{trigger:"hover",triggerEl:t("span",null,y.user.value?.lastLoginIp),ip:y.user.value?.lastLoginIp}):"N/A"),t("div",{class:"pt-[.5rem]"}),t("span",null,"\u4E0A\u6B21\u767B\u9646\u65F6\u95F4:"," ",y.user.value?.lastLoginTime?t("time",null,Le(y.user.value?.lastLoginTime,"yyyy\u5E74M\u6708d\u65E5 HH:mm:ss")):"N/A")),t("div",{class:"pb-4"}))),{create:h}=Bn(),E=C(()=>[{label:"\u535A\u6587",value:e.value.posts,icon:t(tt,null),actions:[{name:"\u64B0\u5199",primary:!0,onClick(){m.push({name:r.EditPost})}},{name:"\u7BA1\u7406",onClick(){m.push({name:r.ViewPost,query:{page:1}})}}]},{label:"\u65E5\u8BB0",value:e.value.notes,icon:t(nt,null),actions:[{name:"\u64B0\u5199",primary:!0,onClick(){m.push({name:r.EditNote})}},{name:"\u7BA1\u7406",onClick(){m.push({name:r.ViewNote,query:{page:1}})}}]},{label:"\u9875\u9762",value:e.value.pages,icon:t(at,null),actions:[{primary:!0,name:"\u7BA1\u7406",onClick(){m.push({name:r.ListPage,query:{page:1}})}}]},{label:"\u901F\u8BB0",value:e.value.recently,icon:t(_e,null),actions:[{primary:!0,name:"\u8BB0\u70B9\u5565",onClick(){h()}},{name:"\u7BA1\u7406",onClick(){m.push({name:r.ListShortHand,query:{page:1}})}}]},{label:"\u5206\u7C7B",value:e.value.categories,icon:t(ut,null),actions:[{primary:!0,name:"\u7BA1\u7406",onClick(){m.push({name:r.EditCategory})}}]},{label:"\u5168\u90E8\u8BC4\u8BBA",value:e.value.allComments,icon:t(ot,null),actions:[{primary:!0,name:"\u7BA1\u7406",onClick(){m.push({name:r.Comment,query:{state:1}})}}]},{label:"\u672A\u8BFB\u8BC4\u8BBA",value:e.value.unreadComments,icon:t(st,null),actions:[{primary:!0,showBadage:!0,name:"\u67E5\u770B",onClick(){m.push({name:r.Comment,query:{state:0}})}}]},{label:"\u53CB\u94FE",value:e.value.links,icon:t(lt,null),actions:[{primary:!0,name:"\u7BA1\u7406",onClick(){m.push({name:r.Friend,query:{state:0}})}}]},{label:"\u65B0\u7684\u53CB\u94FE\u7533\u8BF7",value:e.value.linkApply,icon:t(rt,null),actions:[{primary:!0,showBadage:!0,name:"\u67E5\u770B",onClick(){m.push({name:r.Friend,query:{state:1}})}}]},{label:"\u8BF4\u8BF4",value:e.value.says,icon:t(Ee,null),actions:[{primary:!0,name:"\u8BF4\u4E00\u53E5",onClick(){m.push({name:r.EditSay})}},{primary:!1,name:"\u7BA1\u7406",onClick(){m.push({name:r.ListSay})}}]},{label:"API \u603B\u8C03\u7528\u6B21\u6570",value:e.value.callTime!=="N/A"?Intl.NumberFormat("en-us").format(e.value.callTime):"N/A",icon:t(it,null),actions:[{primary:!0,name:"\u67E5\u770B",onClick(){m.push({name:r.Analyze})}},{name:"\u6E05\u7A7A\u7F13\u5B58",onClick(){B.api.clean_catch.get().then(()=>{p.success("\u6E05\u9664\u6210\u529F")})}}]},{label:"\u4ECA\u65E5 IP \u8BBF\u95EE\u6B21\u6570",value:e.value.todayIpAccessCount,icon:t(ct,null),actions:[{primary:!0,name:"\u67E5\u770B",onClick(){m.push({name:r.Analyze})}}]},{label:"\u5F53\u524D\u5728\u7EBF\u8BBF\u5BA2",value:e.value.online,icon:t(dt,null)},{label:"\u4ECA\u65E5\u8BBF\u5BA2",value:e.value.todayOnlineTotal,icon:t(pt,null)},{value:e.value.todayMaxOnline,label:"\u4ECA\u65E5\u6700\u591A\u540C\u65F6\u5728\u7EBF\u4EBA\u6570",icon:t(mt,null)}]),v=_(()=>()=>t($,null,t(O,{vertical:!0},t(M,{class:"text-opacity-80 font-light"},"\u6570\u636E\u7EDF\u8BA1"),t("p",{class:"-mt-4 mb-3 relative text-gray-500 flex items-center"},t("span",null,"\u6570\u636E\u66F4\u65B0\u4E8E: "),t("time",null," ",n.value?Le(n.value,"yyyy\u5E74M\u6708d\u65E5 HH:mm:ss"):"N/A"),t(D,{text:!0,onClick:a,class:"ml-4 text-black"},t(c,null,t(ye,null))))),t(fe,{xGap:20,yGap:20,cols:"2 100:1 400:2 600:3 900:4 1200:5 1600:6"},E.value.map(d=>t(X,{key:d.label},t(Sn,{...d}))))));return()=>t(Dn,null,t(Xe,{class:"font-light"},"\u6B22\u8FCE\u56DE\u6765"),t(fe,{xGap:12,cols:"1 900:2"},t(X,null,t(M,{class:"text-opacity-80 font-light !mt-[10px] !mb-[10px]"},"\u4E00\u8A00"),t(U,null,t(O,{align:"center",class:"min-h-[3rem]"},i.value?t($,null,t(Z,{class:"leading-normal"},i.value),t("div",{class:"space-x-2 flex items-center"},t(D,{text:!0,onClick:o,class:"ml-0 phone:float-right"},t(c,null,t(ye,null))),t(D,{text:!0,onClick:()=>{navigator.clipboard.writeText(i.value),p.success("\u5DF2\u590D\u5236"),p.info(i.value)}},t(c,null,t(Qe,null))))):t(Z,null,"\u52A0\u8F7D\u4E2D...")))),t(X,null,t(M,{class:"text-opacity-80 font-light !mt-[10px] !mb-[10px]"},"\u4ECA\u65E5\u8BD7\u53E5"),t(U,null,t(pe,{trigger:"hover",placement:"bottom"},{trigger(){return t(Z,null,s.value||"\u83B7\u53D6\u4E2D")},default(){const d=l.value?.origin;return d?t(ve,{class:"text-center min-w-[350px] max-w-[65vw] max-h-[60vh] overflow-auto",bordered:!1},t(M,null,d.title),d.content.map(x=>t(U,{key:x},x))):null}})))),t(b,null),t(v,null),t(Ln,null))}}),Ln=_({setup(){const{app:e}=A(oe);return()=>t(Ze,{tag:"footer",class:"mt-12"},t(U,{class:"text-center",style:{color:"var(--text-color-3)"},depth:"1"},"\u9762\u677F\u7248\u672C: ",window.version||"N/A",t("br",null),"\u7CFB\u7EDF\u7248\u672C: ",e.value?.version||"N/A",t("br",null),"\u9875\u9762\u6765\u6E90: ",window.pageSource||""))}});const $n=_({props:{title:{type:String,default:"Button"},type:{type:String,default:"normal",validator(e){return["normal","warning","danger"].includes(e)}},forecolor:{type:String,default:"#fff"}},setup(){const e=g(),n=g();P(()=>{e.value=n.value?.style});const a=C(()=>n.value?.getBoundingClientRect());return{parallaxBtn:n,btnStyle:e,boundingClientRect:a,down(o){e.value.setProperty("--tz","-25px")},leave(o){e.value.setProperty("--ty","0"),e.value.setProperty("--rx","0"),e.value.setProperty("--ry","0")},move(o){const u=o.clientX-a.value.left,s=o.clientY-a.value.top,l=a.value.width/2,i=a.value.height/2,p=u-l,y=s-i;e.value.setProperty("--rx",`${y/-1}deg`),e.value.setProperty("--ry",`${p/10}deg`)},up(){e.value.setProperty("--tz","-12px")}}}}),Tn=["data-title"];function On(e,n,a,o,u,s){return K(),J("button",{ref:"parallaxBtn",class:ht(["parallax-btn pr",e.type]),"data-title":e.title,style:R({color:e.forecolor}),onMousemove:n[0]||(n[0]=(...l)=>e.move&&e.move(...l)),onMouseup:n[1]||(n[1]=(...l)=>e.up&&e.up(...l)),onMousedown:n[2]||(n[2]=(...l)=>e.down&&e.down(...l)),onMouseleave:n[3]||(n[3]=(...l)=>e.leave&&e.leave(...l))},null,46,Tn)}var Mn=te($n,[["render",On]]);const Vn=_({components:{Avatar:ne,ParallaxButtonVue:Mn},setup(){const e=g(!1),{user:n,updateToken:a}=A(z),o=j(),u=g(null);ge(async()=>{if(!(window.injectData.INIT??(await B.api.init.get()).isInit))return o.replace("/setup")}),P(()=>{const y=new Image;y.src=xe,y.onload=m=>{e.value=!0},u.value.focus(),document.onkeydown=m=>{u.value.focus()}}),Y(()=>{document.onkeydown=null});const s=Q(),l=g(""),i=vt();return{bgUrl:xe,loaded:e,user:n,password:l,handleLogin:async y=>{y?.stopPropagation();try{if(!n.value||!n.value.username){s.error("\u4E3B\u4EBA\u4FE1\u606F\u65E0\u6CD5\u83B7\u53D6");return}const m=await B.api.master.login.post({data:{username:n.value?.username,password:l.value}});a(m.token),o.push(i.query.from?decodeURI(i.query.from):"/dashboard"),s.success("\u6B22\u8FCE\u56DE\u6765")}catch{s.error("\u767B\u9646\u5931\u8D25")}},input:u}}}),Hn=Vn,qn={class:"wrapper"},zn={class:"input-wrap"};function Nn(e,n,a,o,u,s){const l=we("Avatar"),i=we("ParallaxButtonVue");return K(),J("div",null,[F("div",{class:"bg transition-opacity duration-700",style:R({backgroundImage:`url(${e.bgUrl})`,opacity:e.loaded?1:0})},null,4),F("div",qn,[Be(l,{src:e.user?.avatar,size:80},null,8,["src"]),F("form",{action:"#",onSubmit:n[1]||(n[1]=be((...p)=>e.handleLogin&&e.handleLogin(...p),["prevent"]))},[F("div",zn,[gt(F("input",{ref:"input","onUpdate:modelValue":n[0]||(n[0]=p=>e.password=p),type:"password",autofocus:""},null,512),[[ft,e.password]])]),Be(i,{title:"\u767B\u9646",class:"p-button-raised p-button-rounded",onClick:be(e.handleLogin,["prevent","stop"])},null,8,["onClick"])],32)])])}var Wn=te(Hn,[["render",Nn],["__scopeId","data-v-2e4fad88"]]);const Rn=[{path:"/dashboard",component:jn,name:r.Dashboard,meta:{title:"\u4EEA\u8868\u76D8",icon:t(c,null,t(yt,null))}},{path:"/posts",name:r.Post,meta:{title:"\u535A\u6587",icon:t(c,null,t(_t,null))},redirect:"/posts/view",component:k,children:[{path:"view",name:r.ViewPost,meta:{title:"\u7BA1\u7406",icon:t(c,null,t(V,null)),query:{page:1}},component:()=>f(()=>import("./list.js"),["list.js","vendor.js","Add12Filled.js","Delete16Regular.js","title-link.js","index3.js","assets/index.adff1cbf.css","edit-column.js","relative-time.js","use-table.js","rounded-button.js"]).then(e=>e.ManagePostListView)},{path:"edit",name:r.EditPost,meta:{title:"\u64B0\u5199",icon:t(c,null,t(H,null))},props:!0,component:()=>f(()=>import("./write.js"),["write.js","parse-button.js","assets/parse-button.29a3bcab.css","vendor.js","use-react.js","props.js","assets/props.2138023a.css","rounded-button.js","js-yaml.js","TelegramPlane.js","underline-input.js","assets/underline-input.9e79aeb7.css"])},{path:"category",name:r.EditCategory,meta:{title:"\u5206\u7C7B / \u6807\u7B7E",icon:t(c,null,t(Et,null))},component:()=>f(()=>import("./category.js"),["category.js","Add12Filled.js","vendor.js","rounded-button.js","index3.js","assets/index.adff1cbf.css"]).then(e=>e.CategoryView)}]},{path:"/notes",name:r.Note,meta:{title:"\u751F\u6D3B\u8BB0\u5F55",icon:t(c,null,t(wt,null))},redirect:"/notes/view",component:k,children:[{path:"view",name:"view-notes",meta:{title:"\u7BA1\u7406",query:{page:1},icon:t(c,null,t(V,null))},component:()=>f(()=>import("./list2.js"),["list2.js","vendor.js","Add12Filled.js","Delete16Regular.js","title-link.js","index3.js","assets/index.adff1cbf.css","edit-column.js","relative-time.js","use-table.js","rounded-button.js"]).then(e=>e.ManageNoteListView)},{path:"edit",name:r.EditNote,meta:{title:"\u64B0\u5199",icon:t(c,null,t(H,null))},component:()=>f(()=>import("./write2.js"),["write2.js","parse-button.js","assets/parse-button.29a3bcab.css","vendor.js","use-react.js","props.js","assets/props.2138023a.css","rounded-button.js","js-yaml.js","TelegramPlane.js","use-parse-payload.js"])}]},{path:"/comments",name:r.Comment,meta:{title:"\u8BC4\u8BBA",query:{page:1,state:0},icon:t(c,null,t(Bt,null))},component:()=>f(()=>import("./index4.js"),["index4.js","vendor.js","Trash.js","rounded-button.js","index3.js","assets/index.adff1cbf.css","use-table.js"])},{path:"/pages",name:r.Page,redirect:"/pages/list",meta:{title:"\u9875\u9762",icon:t(c,null,t(bt,null))},component:k,children:[{path:"list",name:r.ListPage,meta:{title:"\u7BA1\u7406",icon:t(c,null,t(V,null)),query:{page:1}},component:()=>f(()=>import("./list3.js"),["list3.js","Add12Filled.js","vendor.js","Delete16Regular.js","title-link.js","index3.js","assets/index.adff1cbf.css","relative-time.js","use-table.js","rounded-button.js"]).then(e=>e.ManagePageListView)},{path:"edit",name:r.EditPage,meta:{title:"\u7F16\u8F91",icon:t(c,null,t(H,null))},component:()=>f(()=>import("./write3.js"),["write3.js","parse-button.js","assets/parse-button.29a3bcab.css","vendor.js","use-react.js","props.js","assets/props.2138023a.css","rounded-button.js","js-yaml.js","TelegramPlane.js","underline-input.js","assets/underline-input.9e79aeb7.css","use-parse-payload.js"])}]},{path:"/says",name:r.Say,meta:{title:"\u8BF4\u8BF4",icon:t(c,null,t(Ee,null))},component:k,children:[{path:"list",name:r.ListSay,meta:{title:"\u8BF4\u4EC0\u4E48\u4E86",query:{page:1},icon:t(c,null,t(V,null))},component:()=>f(()=>import("./list4.js"),["list4.js","Add12Filled.js","vendor.js","Delete16Regular.js","index3.js","assets/index.adff1cbf.css","relative-time.js","use-table.js","rounded-button.js"])},{path:"edit",name:r.EditSay,meta:{title:"\u8BF4\u70B9\u4EC0\u4E48\u5462",icon:t(c,null,t(H,null))},component:()=>f(()=>import("./edit.js"),["edit.js","TelegramPlane.js","vendor.js","rounded-button.js","use-parse-payload.js"])}]},{path:"/recently",name:r.ListShortHand,meta:{title:"\u901F\u8BB0",icon:t(c,null,t(_e,null))},component:()=>f(()=>import("./index5.js"),["index5.js","assets/index.c1f573d1.css","vendor.js","Add12Filled.js","relative-time.js","rounded-button.js"])},{path:"/projects",name:r.Project,meta:{title:"\u9879\u76EE",icon:t(c,null,t(Ct,null))},component:k,children:[{path:"list",name:r.ListProject,meta:{title:"\u9879\u76EE\u5217\u8868",query:{page:1},icon:t(c,null,t(V,null))},component:()=>f(()=>import("./list5.js"),["list5.js","Add12Filled.js","vendor.js","Delete16Regular.js","index3.js","assets/index.adff1cbf.css","relative-time.js","use-table.js","rounded-button.js"])},{path:"edit",name:r.EditProject,meta:{title:"\u521B\u5EFA\u9879\u76EE",icon:t(c,null,t(H,null))},component:()=>f(()=>import("./edit2.js"),["edit2.js","TelegramPlane.js","vendor.js","rounded-button.js","monaco.js","index6.js","props.js","assets/props.2138023a.css","use-parse-payload.js"])}]},{path:"/friends",name:r.Friend,meta:{title:"\u670B\u53CB\u4EEC",icon:t(c,null,t(At,null)),query:{state:"0"}},component:()=>f(()=>import("./index7.js"),["index7.js","Plus.js","vendor.js","rounded-button.js","index3.js","assets/index.adff1cbf.css","use-table.js"])},{path:"/analyze",name:r.Analyze,component:()=>f(()=>import("./index8.js"),["index8.js","vendor.js","Trash.js","rounded-button.js","index3.js","assets/index.adff1cbf.css","use-table.js"]),meta:{title:"\u6570\u636E",icon:t(c,null,t(Pt,null)),query:{page:1}}},{path:"/setting",redirect:"/setting/user",meta:{title:"\u8BBE\u5B9A",icon:t(c,null,t(kt,null)),params:{type:"user"}},component:()=>null},{path:"/setting/:type",name:r.Setting,meta:{title:"\u8BBE\u5B9A",params:{type:"user"},hide:!0},component:()=>f(()=>import("./index9.js"),["index9.js","assets/index.7e8ae26f.css","vendor.js","Plus.js","relative-time.js","CheckCircleOutlined.js","rounded-button.js","index10.js"])},{path:"/other",name:r.Other,meta:{title:"\u5176\u4ED6",icon:t(c,null,t(xt,null))},component:k,children:[{path:"snippets",name:r.Snippet,meta:{title:"\u533A\u5757\u4E0E\u7247\u6BB5",icon:t(c,null,t(Ft,null))},component:()=>f(()=>import("./index11.js"),["index11.js","vendor.js","CheckCircleOutlined.js","rounded-button.js","use-react.js","js-yaml.js","use-async-monaco.js","index6.js","Add12Filled.js","index3.js","assets/index.adff1cbf.css","relative-time.js","use-table.js"])},{path:"assets/template",name:r.AssetTemplate,meta:{title:"\u6A21\u677F\u7F16\u8F91",icon:t(c,null,t(Dt,null))},component:()=>f(()=>import("./index12.js"),["index12.js","CheckCircleOutlined.js","vendor.js","TrashSharp.js","rounded-button.js","use-react.js","use-async-monaco.js","index6.js"])},{path:"backup",name:r.Backup,meta:{title:"\u5907\u4EFD",icon:t(c,null,t(It,null))},component:()=>f(()=>import("./backup.js"),["backup.js","TrashSharp.js","vendor.js","rounded-button.js","index3.js","assets/index.adff1cbf.css","use-table.js","index10.js"])},{path:"markdown",name:r.Markdown,meta:{title:"Markdown \u5BFC\u5165\u5BFC\u51FA",icon:t(c,null,t(St,null))},component:()=>f(()=>import("./markdown-helper.js"),["markdown-helper.js","index10.js","vendor.js"])},{path:"cron",name:r.Cron,meta:{title:"\u4EFB\u52A1",icon:t(c,null,t(jt,null))},component:()=>f(()=>import("./cron.js"),["cron.js","index3.js","assets/index.adff1cbf.css","vendor.js","use-table.js","index10.js"])},{path:"log",name:r.Log,meta:{title:"\u65E5\u5FD7",icon:t(c,null,t(Lt,null))},component:()=>f(()=>import("./log.js"),["log.js","assets/log.3449fa9e.css","index3.js","assets/index.adff1cbf.css","vendor.js","use-table.js","index2.js","types.js"])}]}],Un=[{path:"/",component:Ie,name:r.Home,redirect:"/dashboard",children:[...Rn]},{path:"/login",name:r.Login,meta:{isPublic:!0,title:"\u767B\u9646"},component:Wn},{path:"/setup",name:r.Setup,meta:{isPublic:!0,title:"\u521D\u59CB\u5316"},component:()=>f(()=>import("./index13.js"),["index13.js","assets/index.d7186840.css","vendor.js"])},{path:"/dev",redirect:"/",component:k,children:[]},{path:"/debug",component:Ie,meta:{title:"\u8C03\u8BD5"},children:[{path:"events",name:"$$events",meta:{title:"Events"},component:()=>f(()=>import("./index14.js"),["index14.js","vendor.js","use-async-monaco.js","types.js"])}]},{path:"/page/:path(.*)*",name:"page$",redirect:e=>e.fullPath.replace(/^\/page\//,"/pages/")},{path:"/extra/:path(.*)*",name:"extra",redirect:e=>e.fullPath.replace(/^\/extra/,"")},{path:"/:pathMatch(.*)*",name:"404",meta:{isPublic:!0},redirect:"/"}],S=$t({history:Tt(),routes:Un});class Gn{_$$instance=null;get instance(){return this._$$instance}get endpoint(){const n=window.injectData.BASE_API||"https://api.innei.ren/v2";return n.endsWith("/")?n.slice(0,-1):n}constructor(){this._$$instance=Ot({prefix:this.endpoint,timeout:1e4,errorHandler:async n=>{const a=window.message;if(n.request&&!n.response){a.error("\u7F51\u7EDC\u9519\u8BEF");return}if(n.response){try{const u=(await n.response.json()).message;Array.isArray(u)?u.forEach(s=>{a.error(s)}):a.error(u)}catch(o){console.log(o)}return n?.response?.status===401&&S.push("/login"),Promise.reject(n)}}})}request(n,a,o){return this._$$instance[n](a,o)}get api(){return Yn(this)}}const ue=()=>{},Kn=["get","post","delete","patch","put"],Jn=["toString","valueOf","inspect","constructor",Symbol.toPrimitive,Symbol.for("util.inspect.custom")];function Yn(e){const n=[""],a={get(o,u){return Jn.includes(u)?()=>n.join("/"):Kn.includes(u)?async s=>{const l=await e.request(u,n.join("/"),{...s});return Array.isArray(l)||Mt(l)?(()=>{const i=Vt(l,{deep:!0});return{...i,get data(){return i.data??i}}})():l}:(n.push(u),new Proxy(ue,a))},apply(o,u,s){return n.push(...s.filter(l=>l!=null)),new Proxy(ue,a)}};return new Proxy(ue,a)}const B=new Gn;B.instance.interceptors.request.use((e,n)=>{const a=Pe();return a&&(n.headers.Authorization="bearer "+a),{url:e+"?t="+ +new Date,options:{...n,interceptors:!0}}},{});var je;(function(e){e[e.yyyy\u5E74M\u6708d\u65E5=0]="yyyy\u5E74M\u6708d\u65E5",e[e["yyyy\u5E74M\u6708d\u65E5 HH:mm:ss"]=1]="yyyy\u5E74M\u6708d\u65E5 HH:mm:ss",e[e["HH:mm"]=2]="HH:mm",e[e["H:mm:ss A"]=3]="H:mm:ss A",e[e["M-d HH:mm:ss"]=4]="M-d HH:mm:ss"})(je||(je={}));const Le=(e,n="yyyy\u5E74M\u6708d\u65E5")=>Ht(new Date(e),n),oa=(e,n=new Date)=>{if(!e)return"-";e=new Date(e);const a=60*1e3,o=a*60,u=o*24,s=u*30,l=u*365,i=+n-+e;if(i<a){const p=Math.ceil(i/1e3);return p<=0?"\u521A\u521A":p+" \u79D2\u524D"}else return i<o?Math.round(i/a)+" \u5206\u949F\u524D":i<u?Math.round(i/o)+" \u5C0F\u65F6\u524D":i<s?Math.round(i/u)+" \u5929\u524D":i<l?Math.round(i/s)+" \u4E2A\u6708\u524D":Math.round(i/l)+" \u5E74\u524D"},sa=(e=new Date)=>{const n=e,a=new Date(n.getFullYear(),0,0),o=n.getTime()-a.getTime(),u=1e3*60*60*24;return Math.floor(o/u)};function oe(){const e=g();return P(()=>{B.api.get().then(n=>{e.value=n})}),{app:e}}function Qn(){const e=g(),n=C(()=>new Map(e.value?.map(a=>[a.id,a]))||new Map);return{data:e,map:n,get(a){return n.value.get(a)},async fetch(a){if(!e.value||a){const o=await B.api.categories.get({params:{type:"Category"}});e.value=o.data}else return e.value}}}const Xn=()=>en(q,z,Qn,oe),Zn=_({name:"Home",setup(){const{fetchUser:e}=A(z),n=j();return P(()=>{const a=Q(),o=a.error;Object.assign(a,{error:(...u)=>{throw o.apply(this,u),u[0]}}),window.message=a,window.notification=qt(),window.dialog=me(),f(()=>import("./index2.js").then(function(u){return u.i}),["index2.js","types.js","vendor.js"]).then(u=>{u.socket.initIO()}),e().then(()=>{localStorage.getItem("to-setting")==="true"&&(n.push({name:r.Setting,params:{type:"user"}}),localStorage.removeItem("to-setting"))})}),()=>t(re,null)}}),ea=_({setup(){Xn();const{isDark:e}=Ae(q);return()=>t(Rt,{locale:zt,dateLocale:Nt,theme:e.value?Wt:null},t(Ut,null,t(Gt,null,t(Kt,null,t(Zn,null)))))}});const se=new Jt({colorful:!1,color:"#1a9cf3"}),$e=Fe.title;S.beforeEach(async e=>{if(se.start(),e.path==="/setup"){const n=window.injectData.INIT??(await B.api.init.get()).isInit;if(console.log("[isInit]",n),n)return"/"}if(!(e.meta.isPublic||e.fullPath.startsWith("/dev"))){const{ok:n}=await B.api("master")("check_logged").get();if(!n)return"/login?from="+encodeURI(e.fullPath)}});S.afterEach((e,n)=>{document.title=ta(e?.meta.title),se.finish()});S.afterEach(e=>{e.hash=="|publish"&&S.replace({...e,hash:""})});S.onError(()=>{se.finish()});function ta(e){return e?`${e} - ${$e}`:`${$e}`}const Te=Yt(ea);Te.use(S);Te.mount("#app");export{ne as A,Qn as C,wn as I,Mn as P,B as R,I as S,q as U,ke as W,f as _,Dn as a,oa as b,Fe as c,r as d,ua as e,sa as f,Pe as g,bn as h,Bn as i,aa as j,xe as k,Le as p,S as r,A as u};
